(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[631],{7646:function(e,t,n){Promise.resolve().then(n.bind(n,7304))},7304:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return DashboardPage}});var r=n(7437),i=n(2265),l=n(1396),s=n.n(l),a=n(4033),o=n(116),c=n(3868);function AuthGuard(e){let{children:t}=e,[n,l]=(0,i.useState)(!1),[a,o]=(0,i.useState)(null);return((0,i.useEffect)(()=>{o((0,c.PR)()),l(!0)},[]),n)?a?(0,r.jsx)(r.Fragment,{children:t}):(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6 text-center",children:[(0,r.jsx)("div",{className:"text-xl font-semibold",children:"Please sign in to continue"}),(0,r.jsxs)("div",{className:"mt-4 flex justify-center gap-3",children:[(0,r.jsx)(s(),{href:"/auth/sign-in",className:"rounded-xl bg-white px-4 py-2 text-emerald-900 font-semibold",children:"Sign in"}),(0,r.jsx)(s(),{href:"/auth/sign-up",className:"rounded-xl bg-white/10 px-4 py-2 hover:bg-white/20",children:"Create account"})]})]}):null}var d=n(813);function DashboardPage(){let[e,t]=(0,i.useState)(null),[n,l]=(0,i.useState)([]),u=(0,o.useTranslations)("dashboard"),h=(0,o.useLocale)(),f=(0,a.useRouter)();return(0,i.useEffect)(()=>{var e;let n=(0,c.PR)(),r=null!==(e=null==n?void 0:n.email)&&void 0!==e?e:null;t(r),r&&l((0,d.LA)(r))},[]),(0,r.jsx)(AuthGuard,{children:(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:u("title")}),(0,r.jsx)("button",{onClick:()=>{(0,c.w7)(),f.push("/".concat(h))},className:"rounded-xl bg-white/10 px-4 py-2 hover:bg-white/20",children:u("signout")})]}),(0,r.jsxs)("p",{className:"mt-2 text-white/80",children:[u("welcome"),e?", ".concat(e):""]}),(0,r.jsx)("div",{className:"mt-6 grid gap-4 md:grid-cols-2",children:n.map(e=>(0,r.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-semibold",children:e.title}),(0,r.jsxs)("div",{className:"text-sm text-white/70",children:["Updated ",new Date(e.updatedAt).toLocaleDateString()]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(s(),{href:"/".concat(h,"/builder/").concat(e.id),className:"rounded-lg bg-white/10 px-3 py-2 hover:bg-white/20",children:"Edit"}),(0,r.jsx)(s(),{href:"/".concat(h,"/builder/").concat(e.id,"#download"),className:"rounded-lg bg-white/10 px-3 py-2 hover:bg-white/20",children:"Download"})]})]})},e.id))}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:function(){if(!e)return;let t=(0,d.qy)(e,"Resume ".concat(n.length+1));l((0,d.LA)(e)),f.push("/".concat(h,"/builder/").concat(t.id))},className:"rounded-xl bg-white px-4 py-2 font-semibold text-emerald-900",children:u("createNew")})})]})})}},3868:function(e,t,n){"use strict";n.d(t,{PR:function(){return getUser},w7:function(){return signOut},z2:function(){return register},zB:function(){return signIn}});let r="talentpaper:users",i="talentpaper:user";function readUsers(){try{return JSON.parse(localStorage.getItem(r)||"[]")}catch(e){return[]}}function getUser(){let e=localStorage.getItem(i);return e?JSON.parse(e):null}function register(e){let t=readUsers(),n=t.some(t=>t.email.toLowerCase()===e.toLowerCase());return!n&&(t.push({email:e}),localStorage.setItem(r,JSON.stringify(t))),localStorage.setItem(i,JSON.stringify({email:e})),{ok:!0}}function signIn(e){let t=readUsers(),n=t.find(t=>t.email.toLowerCase()===e.toLowerCase());return n?(localStorage.setItem(i,JSON.stringify({email:e})),{ok:!0}):{ok:!1,error:"Account not found"}}function signOut(){localStorage.removeItem(i)}},813:function(e,t,n){"use strict";n.d(t,{Jp:function(){return updateCV},LA:function(){return listCVs},Yk:function(){return getCV},qy:function(){return createCV}});let r="talentpaper:cvs";function readAll(){try{return JSON.parse(localStorage.getItem(r)||"[]")}catch(e){return[]}}function writeAll(e){localStorage.setItem(r,JSON.stringify(e))}function listCVs(e){return readAll().filter(t=>t.user===e)}function getCV(e){return readAll().find(t=>t.id===e)||null}function createCV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled CV",n=globalThis.crypto&&"randomUUID"in globalThis.crypto?globalThis.crypto.randomUUID():String(Date.now()),r={id:n,user:e,title:t,data:{},updatedAt:new Date().toISOString()},i=readAll();return i.push(r),writeAll(i),r}function updateCV(e,t){let n=readAll(),r=n.findIndex(t=>t.id===e);return -1===r?null:(n[r]={...n[r],...t,data:{...n[r].data,...t.data||{}},updatedAt:new Date().toISOString()},writeAll(n),n[r])}},1396:function(e,t,n){e.exports=n(8326)}},function(e){e.O(0,[735,326,971,472,744],function(){return e(e.s=7646)}),_N_E=e.O()}]);